# InGFileWriter Plugin


You can safely ignore/delte this file and go straight to the JS [here](InGFileWriter.js) if you like, but this should be more
readable for getting started and finding out what's going on.
Again, names normalised for re-use on other platforms/swapping of engines, and better readability.


	cordova = require("cordova")
	exec = require("cordova/exec")

	class InGFileWriter

## Initial Set up

Communication to the calling app will all be handled with event triggers.
We don't have jquery here, so raw javascript custom events...

		trigger = (evt, args) ->
			document.dispatchEvent new CustomEvent(evt, {detail: args})

Just to be lazy, here's a generic error handler:
If anything bad happens, just trigger an error with the message and let the calling app decide what to do with it.

		genericHandleError = (args) ->
			trigger "openEarsError", args


		

	InGFileWriter = new InGFileWriter()
	module.exports = InGFileWriter




/// index.js


// Generated by CoffeeScript 1.6.3
(function() {
 $(document).on("ready", function() {
                return $(document).on("deviceready", function() {
                                      var FileWrt,$getFileContents,$setFileContents,$fileContentsDiv,$clearContents;
                                      
                                      $fileContentsDiv = $("#fileContentsDiv");
                                      $getFileContents = $("#getFileContents");
                                      $clearContents =$("#clearContents");
                                      
                                      updateStatus = function(new_status) {
                                        var previous_statuses;
                                        previous_statuses = $fileContentsDiv.html();
                                        return $fileContentsDiv.html(new_status);
                                      };

                                      
                                      $clearContents.on("click", function(e) {
                                                          
                                                          return  updateStatus('');
                                                          });
                                      
                                      FileWrt = cordova.plugins.InGFileWriter;
                                     
                                      $getFileContents = $("#getFileContents");
                                    
                                      $getFileContents.on("click", function(e) {
                                                
                                                return FileWrt.cordovaGetFileContents();
                                                });
                                      
                                      $setFileContents = $("#setFileContents");
                                      
                                      $setFileContents.on("click", function(e) {
                                                           var dateStr = new Date().toJSON();
                                                        updateStatus(dateStr);
                                                          return FileWrt.cordovaSetFileContents(dateStr);
                                                          });
                                      
                                      
                                      $(document).on("cordovaSetFileContents", function(evt) {
                                                     var getresponse;
                                                     //  alert(evt.originalEvent.detail);
                                                     getresponse = evt.originalEvent.detail;
                                                   //  return updateStatus(getresponse);
                                                     });
                                      
                                      $(document).on("cordovaGetFileContents", function(evt) {
                                                     var getresponse;
                                                     getresponse = evt.originalEvent.detail.dateStr;
                                                     return updateStatus(getresponse);
                                                     });
                                      
                                      
                                      });
                });
 
 }).call(this);


// index.html

 <h1>Custom Plugin</h1>
          
                <div id="fileContentsDiv">...</div>
                <button id='getFileContents'>GET file contents</button>
                <button id='setFileContents'>SET file contents</button>
                 <button id='clearContents'>Clear contents</button>

  <script type="text/javascript" src="js/lib/jquery.js"></script>
